# ğŸ¯ Cozy Bar TileMap æ‰‹åŠ¨åˆ›å»ºæŒ‡å—

## ğŸ“‹ æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„æŒ‡å—ï¼Œæ•™ä½ å¦‚ä½•åœ¨Godotç¼–è¾‘å™¨ä¸­**æ‰‹åŠ¨**åˆ›å»ºCozy Barçš„TileMapç³»ç»Ÿï¼ŒåŒ…æ‹¬TileSetèµ„æºçš„åˆ†å‰²å’Œç“¦ç‰‡çš„æ‰‹åŠ¨æ”¾ç½®ã€‚

## ğŸ› ï¸ ç¬¬ä¸€æ­¥ï¼šè®¾ç½®TileSetèµ„æº

### 1.1 åˆ›å»ºTileSetèµ„æº

1. åœ¨Godotç¼–è¾‘å™¨ä¸­æ‰“å¼€ `tilesets/cozy_bar_tileset.tres`
2. å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå³é”®ç‚¹å‡» `tilesets` æ–‡ä»¶å¤¹ â†’ **New Resource** â†’ é€‰æ‹© **TileSet**
3. ä¿å­˜ä¸º `cozy_bar_tileset.tres`

### 1.2 æ·»åŠ ç“¦ç‰‡æº (TileSetAtlasSource)

åœ¨TileSetç¼–è¾‘å™¨ä¸­ï¼š

#### ğŸ“ Source 0: åœ°æ¿å’Œå¢™å£
1. ç‚¹å‡» **Add Source** â†’ é€‰æ‹© **Atlas**
2. æ‹–æ‹½ `assets/sprites/tiles/v2/TopDownHouse_FloorsAndWalls.png` åˆ° **Texture** å­—æ®µ
3. è®¾ç½® **Texture Region Size** ä¸º `32x32`
4. **ID** ä¿æŒä¸º `0`

#### ğŸ“ Source 1: å®¶å…·
1. ç‚¹å‡» **Add Source** â†’ é€‰æ‹© **Atlas** 
2. æ‹–æ‹½ `assets/sprites/tiles/v2/TopDownHouse_FurnitureState1.png` åˆ° **Texture** å­—æ®µ
3. è®¾ç½® **Texture Region Size** ä¸º `32x32`
4. **ID** è®¾ç½®ä¸º `1`

#### ğŸ“ Source 2: å°ç‰©å“
1. ç‚¹å‡» **Add Source** â†’ é€‰æ‹© **Atlas**
2. æ‹–æ‹½ `assets/sprites/tiles/v2/TopDownHouse_SmallItems.png` åˆ° **Texture** å­—æ®µ  
3. è®¾ç½® **Texture Region Size** ä¸º `32x32`
4. **ID** è®¾ç½®ä¸º `2`

### 1.3 æ‰‹åŠ¨åˆ†å‰²ç“¦ç‰‡

å¯¹æ¯ä¸ªSourceï¼Œä½ éœ€è¦æ‰‹åŠ¨ç‚¹å‡»æ¥åˆ†å‰²ç“¦ç‰‡ï¼š

#### Source 0 (åœ°æ¿å’Œå¢™å£) - é‡è¦ç“¦ç‰‡åˆ†å‰²ï¼š
1. **æœ¨è´¨åœ°æ¿** - ç‚¹å‡»åæ ‡ `(1,1)` çš„ç“¦ç‰‡
   - å³ä¾§é¢æ¿è®¾ç½® **Setup** â†’ ç¡®è®¤ç“¦ç‰‡å·²è¢«æ·»åŠ 
   
2. **ç –å¢™** - ç‚¹å‡»åæ ‡ `(2,0)` çš„ç“¦ç‰‡
   - åœ¨ **Physics** æ ‡ç­¾é¡µ â†’ ç‚¹å‡» **Add** â†’ é€‰æ‹©çŸ©å½¢å½¢çŠ¶
   - è°ƒæ•´ç¢°æ’å½¢çŠ¶è¦†ç›–æ•´ä¸ªç“¦ç‰‡

3. **é—¨** - ç‚¹å‡»åæ ‡ `(3,2)` çš„ç“¦ç‰‡
   - **Setup** â†’ æ·»åŠ ç“¦ç‰‡
   - **ä¸è¦**æ·»åŠ ç‰©ç†ç¢°æ’ï¼ˆé—¨å¯ä»¥é€šè¿‡ï¼‰

#### Source 1 (å®¶å…·) - é‡è¦ç“¦ç‰‡åˆ†å‰²ï¼š
1. **å§å°** - ç‚¹å‡»åæ ‡ `(4,1)` çš„ç“¦ç‰‡
   - **Physics** â†’ æ·»åŠ çŸ©å½¢ç¢°æ’å½¢çŠ¶
   
2. **æ¡Œå­** - ç‚¹å‡»åæ ‡ `(2,1)` çš„ç“¦ç‰‡
   - **Physics** â†’ æ·»åŠ çŸ©å½¢ç¢°æ’å½¢çŠ¶
   
3. **éŸ³ä¹èˆå°** - ç‚¹å‡»åæ ‡ `(5,3)` çš„ç“¦ç‰‡
   - **Setup** â†’ æ·»åŠ ç“¦ç‰‡
   - **ä¸æ·»åŠ ç¢°æ’**ï¼ˆå¯ä»¥ç«™åœ¨èˆå°ä¸Šï¼‰
   
4. **å§å°å‡³** - ç‚¹å‡»åæ ‡ `(0,2)` çš„ç“¦ç‰‡
   - **Setup** â†’ æ·»åŠ ç“¦ç‰‡ï¼Œ**æ— ç¢°æ’**
   
5. **æ¤…å­** - ç‚¹å‡»åæ ‡ `(1,2)` çš„ç“¦ç‰‡
   - **Setup** â†’ æ·»åŠ ç“¦ç‰‡ï¼Œ**æ— ç¢°æ’**

## ğŸ—ï¸ ç¬¬äºŒæ­¥ï¼šè®¾ç½®åœºæ™¯ä¸­çš„TileMapå›¾å±‚

### 2.1 æ‰“å¼€cozy_bar.tscnåœºæ™¯

åœ¨åœºæ™¯ç¼–è¾‘å™¨ä¸­æ‰¾åˆ° `TileMaps` èŠ‚ç‚¹ä¸‹çš„5ä¸ªTileMapå›¾å±‚ï¼š

### 2.2 é…ç½®æ¯ä¸ªå›¾å±‚

#### FloorLayer (åœ°æ¿å±‚)
1. é€‰ä¸­ `FloorLayer` èŠ‚ç‚¹
2. åœ¨æ£€è§†å™¨ä¸­è®¾ç½®ï¼š
   - **Tile Set** â†’ é€‰æ‹© `cozy_bar_tileset.tres`
   - **Layer 0** â†’ **Z Index** = `0`
   - **Layer 0** â†’ **Y Sort Enabled** = `false`

#### WallLayer (å¢™å£å±‚)  
1. é€‰ä¸­ `WallLayer` èŠ‚ç‚¹
2. è®¾ç½®ï¼š
   - **Tile Set** â†’ é€‰æ‹© `cozy_bar_tileset.tres`
   - **Layer 0** â†’ **Z Index** = `1`
   - **Layer 0** â†’ **Y Sort Enabled** = `false`

#### FurnitureLayer (å®¶å…·å±‚)
1. é€‰ä¸­ `FurnitureLayer` èŠ‚ç‚¹
2. è®¾ç½®ï¼š
   - **Tile Set** â†’ é€‰æ‹© `cozy_bar_tileset.tres`
   - **Layer 0** â†’ **Z Index** = `2`
   - **Layer 0** â†’ **Y Sort Enabled** = `true` âš ï¸ **é‡è¦**
   - **Layer 0** â†’ **Y Sort Origin** = `16`

#### DecorationLayer (è£…é¥°å±‚)
1. é€‰ä¸­ `DecorationLayer` èŠ‚ç‚¹
2. è®¾ç½®ï¼š
   - **Tile Set** â†’ é€‰æ‹© `cozy_bar_tileset.tres`
   - **Layer 0** â†’ **Z Index** = `3`
   - **Layer 0** â†’ **Y Sort Enabled** = `true` âš ï¸ **é‡è¦**
   - **Layer 0** â†’ **Y Sort Origin** = `16`

#### CollisionLayer (ç¢°æ’å±‚)
1. é€‰ä¸­ `CollisionLayer` èŠ‚ç‚¹
2. è®¾ç½®ï¼š
   - **Tile Set** â†’ é€‰æ‹© `cozy_bar_tileset.tres`
   - **Layer 0** â†’ **Z Index** = `-1`
   - **Layer 0** â†’ **Enabled** = `false` (éšè—)
   - **Layer 0** â†’ **Y Sort Enabled** = `false`

## ğŸ¨ ç¬¬ä¸‰æ­¥ï¼šæ‰‹åŠ¨æ”¾ç½®ç“¦ç‰‡åˆ›å»º12x10æˆ¿é—´

### 3.1 æˆ¿é—´å¸ƒå±€è®¾è®¡

```
   0 1 2 3 4 5 6 7 8 9 10 11
0  W W W W W W W W W W W  W
1  W . . . . . . . . . .  W  
2  W . . B B B B B B . .  W
3  W . . c c c c c c . .  W
4  W . . . . . . . . . .  W
5  W . T T . . . . T T .  W
6  W . S S . . . . S S .  W
7  W . . . . . . . . . .  W
8  W . . . . M M . . . .  W
9  W W W W W D D W W W W  W
```

### 3.2 å¼€å§‹æ‰‹åŠ¨æ”¾ç½®

#### æ­¥éª¤1: æ”¾ç½®åœ°æ¿ (FloorLayer)
1. é€‰ä¸­ `FloorLayer` èŠ‚ç‚¹
2. åœ¨TileMapç¼–è¾‘å™¨ä¸­ï¼š
   - é€‰æ‹© **Source 0**
   - ç‚¹å‡»æœ¨è´¨åœ°æ¿ç“¦ç‰‡ `(1,1)`
   - ä½¿ç”¨ç”»ç¬”å·¥å…·åœ¨æ‰€æœ‰ `.` ä½ç½®æ”¾ç½®åœ°æ¿ç“¦ç‰‡
   - è¦†ç›–èŒƒå›´ï¼šx=1åˆ°10, y=1åˆ°8

#### æ­¥éª¤2: æ”¾ç½®å¢™å£ (WallLayer)  
1. é€‰ä¸­ `WallLayer` èŠ‚ç‚¹
2. æ”¾ç½®å¤–å¢™ï¼š
   - é€‰æ‹©ç –å¢™ç“¦ç‰‡ `(2,0)` from Source 0
   - æ”¾ç½®é¡¶éƒ¨å¢™å£ï¼šy=0, x=0åˆ°11
   - æ”¾ç½®å·¦å³å¢™å£ï¼šx=0å’Œx=11, y=1åˆ°8  
   - æ”¾ç½®åº•éƒ¨å¢™å£ï¼šy=9, x=0åˆ°4å’Œx=7åˆ°11
3. æ”¾ç½®é—¨ï¼š
   - é€‰æ‹©é—¨ç“¦ç‰‡ `(3,2)` from Source 0
   - æ”¾ç½®åœ¨ `(5,9)` å’Œ `(6,9)` ä½ç½®

#### æ­¥éª¤3: æ”¾ç½®å®¶å…· (FurnitureLayer)
1. é€‰ä¸­ `FurnitureLayer` èŠ‚ç‚¹
2. æ”¾ç½®å§å°ï¼š
   - é€‰æ‹©å§å°ç“¦ç‰‡ `(4,1)` from Source 1
   - åœ¨y=2, x=3åˆ°8æ”¾ç½®6ä¸ªå§å°ç“¦ç‰‡
3. æ”¾ç½®æ¡Œå­ï¼š
   - é€‰æ‹©æ¡Œå­ç“¦ç‰‡ `(2,1)` from Source 1  
   - å·¦æ¡Œï¼š(2,5) å’Œ (3,5)
   - å³æ¡Œï¼š(8,5) å’Œ (9,5)
4. æ”¾ç½®èˆå°ï¼š
   - é€‰æ‹©èˆå°ç“¦ç‰‡ `(5,3)` from Source 1
   - ä½ç½®ï¼š(5,8) å’Œ (6,8)

#### æ­¥éª¤4: æ”¾ç½®è£…é¥° (DecorationLayer)
1. é€‰ä¸­ `DecorationLayer` èŠ‚ç‚¹
2. æ”¾ç½®å§å°å‡³ï¼š
   - é€‰æ‹©å§å°å‡³ç“¦ç‰‡ `(0,2)` from Source 1
   - åœ¨y=3, x=3åˆ°8æ”¾ç½®6ä¸ªå‡³å­
3. æ”¾ç½®æ¤…å­ï¼š
   - é€‰æ‹©æ¤…å­ç“¦ç‰‡ `(1,2)` from Source 1
   - å·¦æ¡Œæ¤…å­ï¼š(2,6) å’Œ (3,6)  
   - å³æ¡Œæ¤…å­ï¼š(8,6) å’Œ (9,6)

## ğŸ® ç¬¬å››æ­¥ï¼šè®¾ç½®è§’è‰²ç”Ÿæˆç‚¹

### 4.1 é…ç½®Marker2DèŠ‚ç‚¹

åœ¨ `SpawnPoints` èŠ‚ç‚¹ä¸‹æ‰¾åˆ°4ä¸ªMarker2DèŠ‚ç‚¹å¹¶è®¾ç½®ä½ç½®ï¼š

1. **PlayerSpawn** - Position: `(192, 160)` (æˆ¿é—´ä¸­å¤®)
2. **BobSpawn** - Position: `(192, 64)` (å§å°åæ–¹) 
3. **AliceSpawn** - Position: `(96, 192)` (å·¦æ¡Œæ—)
4. **SamSpawn** - Position: `(288, 192)` (å³æ¡Œæ—)

### 4.2 é…ç½®äº¤äº’åŒºåŸŸ

è®¾ç½® `InteractiveObjects` ä¸‹çš„Area2DèŠ‚ç‚¹ï¼š

1. **BarCounter** - Position: `(192, 96)`
2. **Table1** - Position: `(96, 192)`  
3. **Table2** - Position: `(288, 192)`
4. **MusicStage** - Position: `(192, 288)`

## âœ… å®Œæˆæ£€æŸ¥æ¸…å•

### TileSetè®¾ç½®éªŒè¯ï¼š
- [ ] ä¸‰ä¸ªç“¦ç‰‡æºå·²æ·»åŠ å¹¶è®¾ç½®æ­£ç¡®çš„çº¹ç†
- [ ] é‡è¦ç“¦ç‰‡å·²æ‰‹åŠ¨åˆ†å‰²ï¼ˆåœ°æ¿ã€å¢™å£ã€é—¨ã€å®¶å…·ï¼‰
- [ ] å¢™å£å’Œå®¶å…·ç“¦ç‰‡æœ‰ç¢°æ’å½¢çŠ¶
- [ ] åœ°æ¿ã€è£…é¥°ç“¦ç‰‡æ— ç¢°æ’å½¢çŠ¶

### åœºæ™¯é…ç½®éªŒè¯ï¼š
- [ ] 5ä¸ªTileMapå›¾å±‚éƒ½é“¾æ¥åˆ°cozy_bar_tileset.tres
- [ ] Z-indexè®¾ç½®æ­£ç¡®ï¼ˆFloor=0, Wall=1, Furniture=2, Decoration=3, Collision=-1ï¼‰
- [ ] Y-sortä»…åœ¨Furnitureå’ŒDecorationå±‚å¯ç”¨
- [ ] CollisionLayerå·²éšè—

### æ‰‹åŠ¨æ”¾ç½®éªŒè¯ï¼š
- [ ] åœ°æ¿è¦†ç›–æ‰€æœ‰å¼€æ”¾åŒºåŸŸ (1-10, 1-8)
- [ ] å¤–å¢™å®Œæ•´ï¼Œé—¨åœ¨æ­£ç¡®ä½ç½® (5,9)(6,9)
- [ ] å§å°6æ ¼å®½ï¼Œä½äºæ­£ç¡®ä½ç½®
- [ ] 4å¼ æ¤…å­å’Œ2å¼ æ¡Œå­å·²æ”¾ç½®
- [ ] èˆå°ä½äºæˆ¿é—´åº•éƒ¨ä¸­å¤®
- [ ] 6ä¸ªå§å°å‡³å’Œ4ä¸ªæ¤…å­å·²æ”¾ç½®

### ç”Ÿæˆç‚¹éªŒè¯ï¼š
- [ ] 4ä¸ªè§’è‰²ç”Ÿæˆç‚¹ä½ç½®æ­£ç¡®
- [ ] 4ä¸ªäº¤äº’åŒºåŸŸä½ç½®æ­£ç¡®

## ğŸ”§ å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜1: ç“¦ç‰‡ä¸æ˜¾ç¤º
- **æ£€æŸ¥**ï¼šTileMapèŠ‚ç‚¹æ˜¯å¦æ­£ç¡®é“¾æ¥åˆ°TileSetèµ„æº
- **æ£€æŸ¥**ï¼šç“¦ç‰‡æ˜¯å¦åœ¨TileSetä¸­å·²æ­£ç¡®åˆ†å‰²

### é—®é¢˜2: ç¢°æ’ä¸å·¥ä½œ  
- **æ£€æŸ¥**ï¼šå¢™å£å’Œå®¶å…·ç“¦ç‰‡æ˜¯å¦åœ¨TileSetä¸­æ·»åŠ äº†ç‰©ç†å½¢çŠ¶
- **æ£€æŸ¥**ï¼šCollisionLayeræ˜¯å¦åŒ…å«ç›¸åŒçš„ç¢°æ’ç“¦ç‰‡

### é—®é¢˜3: æ¸²æŸ“é¡ºåºé”™è¯¯
- **æ£€æŸ¥**ï¼šå„å›¾å±‚Z-indexè®¾ç½®æ˜¯å¦æ­£ç¡®
- **æ£€æŸ¥**ï¼šFurnitureå’ŒDecorationå±‚æ˜¯å¦å¯ç”¨äº†Y-sort

### é—®é¢˜4: Y-sortingä¸å·¥ä½œ
- **æ£€æŸ¥**ï¼šY Sort Originè®¾ç½®ä¸º16ï¼ˆç“¦ç‰‡ä¸­å¿ƒï¼‰
- **æ£€æŸ¥**ï¼šåªæœ‰Furnitureå’ŒDecorationå±‚å¯ç”¨Y-sort

## ğŸ‰ å®Œæˆï¼

ä½ ç°åœ¨æ‹¥æœ‰ä¸€ä¸ªå®Œå…¨æ‰‹åŠ¨åˆ›å»ºçš„Cozy Bar TileMapç³»ç»Ÿï¼è¿™ä¸ª12x10çš„æˆ¿é—´åŒ…å«ï¼š
- âœ¨ å®Œæ•´çš„å§å°åŒºåŸŸï¼ˆ6æ ¼å§å° + 6ä¸ªå‡³å­ï¼‰
- âœ¨ 2å¼ å®¢æ¡Œï¼ˆå„æœ‰2æŠŠæ¤…å­ï¼‰  
- âœ¨ éŸ³ä¹è¡¨æ¼”èˆå°
- âœ¨ 4ä¸ªè§’è‰²ç”Ÿæˆç‚¹
- âœ¨ æ­£ç¡®çš„ç¢°æ’æ£€æµ‹
- âœ¨ åˆ†å±‚æ¸²æŸ“å’ŒY-sorting

ç°åœ¨å¯ä»¥è¿è¡Œæ¸¸æˆï¼Œè§’è‰²åº”è¯¥èƒ½æ­£ç¡®åœ°åœ¨æˆ¿é—´ä¸­ç§»åŠ¨å¹¶ä¸ç‰©å“äº¤äº’ï¼